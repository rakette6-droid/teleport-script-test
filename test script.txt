local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local teleportDistance = 5
local spinning = false
local directions = {
	{angle = 0}, {angle = 45}, {angle = 90}, {angle = 135},
	{angle = 180}, {angle = -135}, {angle = -90}, {angle = -45}
}

local function teleportAndLook(angle)
	local cf = hrp.CFrame
	local move = (cf * CFrame.Angles(0, math.rad(angle), 0)).LookVector * teleportDistance
	hrp.CFrame = CFrame.new(cf.Position + move) * CFrame.Angles(0, math.rad(angle), 0)
end

local function startSpin()
	if spinning then return end
	spinning = true
	task.spawn(function()
		while spinning do
			for _, d in ipairs(directions) do
				if not spinning then break end
				teleportAndLook(d.angle)
				task.wait(0.1)
			end
		end
	end)
end

local function stopSpin()
	spinning = false
end

UserInputService.InputBegan:Connect(function(i, p)
	if p then return end
	if i.KeyCode == Enum.KeyCode.Y then
		startSpin()
	elseif i.KeyCode == Enum.KeyCode.F then
		stopSpin()
	end
end)

local teleportDistance2, canTeleport, cooldown = 7, true, 0.2
local function teleport(key)
	if not canTeleport then return end
	local pos = hrp.Position
	if key == "W" then
		pos += hrp.CFrame.LookVector * teleportDistance2
	elseif key == "S" then
		pos -= hrp.CFrame.LookVector * teleportDistance2
	elseif key == "A" then
		pos -= hrp.CFrame.RightVector * teleportDistance2
	elseif key == "D" then
		pos += hrp.CFrame.RightVector * teleportDistance2
	end
	hrp.CFrame = CFrame.new(pos, pos + hrp.CFrame.LookVector)
	canTeleport = false
	task.delay(cooldown, function() canTeleport = true end)
end

UserInputService.InputBegan:Connect(function(i, p)
	if p then return end
	local k = i.KeyCode
	if k == Enum.KeyCode.W then teleport("W")
	elseif k == Enum.KeyCode.S then teleport("S")
	elseif k == Enum.KeyCode.A then teleport("A")
	elseif k == Enum.KeyCode.D then teleport("D") end
end)

local teleportDistance3, running, forward = 7, false, true
local function flashTeleport()
	while running do
		local offset = forward and teleportDistance3 or -teleportDistance3
		local target = hrp.Position + hrp.CFrame.LookVector * offset
		hrp.CFrame = CFrame.new(target, target + hrp.CFrame.LookVector)
		forward = not forward
		task.wait(0.02)
	end
end

UserInputService.InputBegan:Connect(function(i, p)
	if p then return end
	if i.KeyCode == Enum.KeyCode.T and not running then
		running = true
		task.spawn(flashTeleport)
	elseif i.KeyCode == Enum.KeyCode.F and running then
		running = false
	end
end)

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 360, 0, 110)
frame.Position = UDim2.new(1, -300, 1, -160)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BackgroundTransparency = 1
frame.BorderSizePixel = 0
frame.Parent = gui

local corner = Instance.new("UICorner", frame)
corner.CornerRadius = UDim.new(0, 10)

local gradient = Instance.new("UIGradient", frame)
gradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 35)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 20))
})
gradient.Rotation = 90

local accent = Instance.new("Frame", frame)
accent.Size = UDim2.new(0, 6, 1, 0)
accent.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
accent.BackgroundTransparency = 0.1
accent.BorderSizePixel = 0

local accentGlow = Instance.new("UIGradient", accent)
accentGlow.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 200, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 150, 255))
})
accentGlow.Rotation = 90

local shadow = Instance.new("ImageLabel", frame)
shadow.AnchorPoint = Vector2.new(0.5, 0.5)
shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
shadow.Size = UDim2.new(1, 30, 1, 30)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://5028857084"
shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
shadow.ImageTransparency = 0.5
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(24, 24, 276, 276)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, -20, 0, 25)
title.Position = UDim2.new(0, 15, 0, 8)
title.BackgroundTransparency = 1
title.Font = Enum.Font.SourceSansBold
title.Text = "FE Teleport Script Attached!"
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextTransparency = 1
title.TextXAlignment = Enum.TextXAlignment.Left

local msg = Instance.new("TextLabel", frame)
msg.Size = UDim2.new(1, -20, 1, -40)
msg.Position = UDim2.new(0, 15, 0, 35)
msg.BackgroundTransparency = 1
msg.Font = Enum.Font.SourceSans
msg.TextSize = 16
msg.TextWrapped = true
msg.TextColor3 = Color3.fromRGB(210, 210, 210)
msg.TextTransparency = 1
msg.TextXAlignment = Enum.TextXAlignment.Left
msg.TextYAlignment = Enum.TextYAlignment.Top
msg.Text = "Press 'T' to start flash teleporting\nPress 'Y' to start spinning\nTo stop the flash/spin, press 'F'."

local closeLabel = Instance.new("TextLabel", frame)
closeLabel.Size = UDim2.new(1, 0, 1, 0)
closeLabel.BackgroundTransparency = 1
closeLabel.Font = Enum.Font.SourceSansBold
closeLabel.TextSize = 18
closeLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
closeLabel.TextTransparency = 1
closeLabel.Text = "Made by the 67_gods"
closeLabel.Visible = false


local startPos = frame.Position + UDim2.new(0, 200, 0, 0)
frame.Position = startPos
TweenService:Create(frame, TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
	Position = UDim2.new(1, -380, 1, -160),
	BackgroundTransparency = 0.1
}):Play()
TweenService:Create(title, TweenInfo.new(0.6), {TextTransparency = 0}):Play()
TweenService:Create(msg, TweenInfo.new(0.6), {TextTransparency = 0}):Play()


task.delay(5, function()
	local fade = 0.6
	TweenService:Create(title, TweenInfo.new(fade), {TextTransparency = 1}):Play()
	TweenService:Create(msg, TweenInfo.new(fade), {TextTransparency = 1}):Play()
	task.wait(fade)
	closeLabel.Visible = true
	TweenService:Create(closeLabel, TweenInfo.new(0.6), {TextTransparency = 0}):Play()
	task.wait(1.2)
	TweenService:Create(frame, TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
		BackgroundTransparency = 1,
		Position = frame.Position - UDim2.new(0, 0, 0, 40)
	}):Play()
	TweenService:Create(closeLabel, TweenInfo.new(0.7), {TextTransparency = 1}):Play()
	task.wait(1)
	gui:Destroy()
end)
